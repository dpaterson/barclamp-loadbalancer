! Sample Configuration File for keepalived
! Generated by Chef.

global_defs {
   notification_email {
     acassen
   }
   notification_email_from root@<%= node[:domain] %>
}

vrrp_instance VI_adm {
<% if @is_master %>
    state MASTER
    priority 101
<% else %>
    state BACKUP
    priority 100
<% end %>
    interface <%= @admin_iface %>
    virtual_router_id 50
    nopreempt
    advert_int 1
    virtual_ipaddress {
        <%= @admin_ip %>
    }
}

vrrp_instance VI_public {
<% if @is_master %>
    state MASTER
    priority 101
<% else %>
    state BACKUP
    priority 100
<% end %>
    interface <%= @public_iface %>
    virtual_router_id 51
    nopreempt
    priority 100
    advert_int 1
    virtual_ipaddress {
        <%= @public_ip %>
    }
}
